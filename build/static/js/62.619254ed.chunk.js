(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[62],{2018:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a(31),r=a(30),i=a(46),o=a(47),c=a(48),s=a(1),d=a.n(s),u=a(1197),m=a(1935),h=(a(1819),a(1820),a(1821)),v=a.n(h),p=a(1833),E=a.n(p),f=a(1408),b=a(1315),g=a(1134),w=a(1200),C={month:{name:"Month",icon:"view_module"},week:{name:"Week",icon:"view_week"},work_week:{name:"Work week",icon:"view_array"},day:{name:"Day",icon:"view_day"},agenda:{name:"Agenda",icon:"view_agenda"}},y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={},a.renderViewButtons=function(){var e=a.props.views,t=a.props.view;if(e.length>1)return e.map((function(e){return d.a.createElement(b.a,{title:C[e].name,key:e},d.a.createElement("div",null,d.a.createElement(g.a,{"aria-label":e,onClick:function(){return a.props.onView(e)},disabled:t===e},d.a.createElement(w.a,{className:"text-white"},C[e].icon))))}))},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.label;return d.a.createElement("div",{className:"calendar-header flex py-1 justify-around bg-primary"},d.a.createElement("div",{className:"flex justify-center"},d.a.createElement(b.a,{title:"Previous"},d.a.createElement(g.a,{onClick:this.navigate.bind(null,f.navigate.PREVIOUS)},d.a.createElement(w.a,{className:"text-white"},"chevron_left"))),d.a.createElement(b.a,{title:"Today"},d.a.createElement(g.a,{onClick:this.navigate.bind(null,f.navigate.TODAY)},d.a.createElement(w.a,{className:"text-white"},"today"))),d.a.createElement(b.a,{title:"Next"},d.a.createElement(g.a,{onClick:this.navigate.bind(null,f.navigate.NEXT)},d.a.createElement(w.a,{className:"text-white"},"chevron_right")))),d.a.createElement("div",{className:"flex items-center"},d.a.createElement("h6",{className:"m-0 text-white"},e)),d.a.createElement("div",{className:"flex"},this.renderViewButtons()))}}]),t}(E.a),x=a(26),N=a(333),k=a(20),D=a.n(k),O=function(e){return D.a.post("/api/calendar/events/add",e)},j=function(e){return D.a.post("/api/calendar/events/update",e)},S=function(e){return D.a.post("/api/calendar/events/delete",e)},M=a(8),R=a(21),V=a(1219),T=a(1195),A=a(66),_=a(1262),q=a(1999),z=a(1334),W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",start:"",end:"",location:"",note:""},a.handleChange=function(e){e.persist(),a.setState(Object(R.a)({},e.target.name,e.target.value))},a.handleFormSubmit=function(){a.state.id?j(Object(M.a)({},a.state)).then((function(){a.props.handleClose()})):O(Object(M.a)({id:a.generateRandomId()},a.state)).then((function(){a.props.handleClose()}))},a.handleDeleteEvent=function(){a.state.id&&S(a.state).then((function(){a.props.handleClose()}))},a.handleDateChange=function(e,t){a.setState(Object(R.a)({},t,e))},a.generateRandomId=function(){var e=Math.random().toString();return e.substr(2,e.length-1)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(M.a)({},this.props.event))}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.start,l=t.end,r=t.location,i=t.note,o=this.props,c=o.open,s=o.handleClose;return d.a.createElement(V.a,{onClose:s,open:c,maxWidth:"xs",fullWidth:!0},d.a.createElement("div",{className:"flex justify-between items-center pl-4 pr-2 py-2 bg-primary"},d.a.createElement("h4",{className:"m-0 text-white"},"Add Events"),d.a.createElement(g.a,{onClick:s},d.a.createElement(w.a,{className:"text-white"},"clear"))),d.a.createElement("div",{className:"p-4"},d.a.createElement(A.ValidatorForm,{ref:"form",onSubmit:this.handleFormSubmit},d.a.createElement(A.TextValidator,{className:"mb-6 w-full",label:"Title",onChange:this.handleChange,type:"text",name:"title",value:a,validators:["required"],errorMessages:["this field is required"]}),d.a.createElement(T.a,{container:!0,spacing:4},d.a.createElement(T.a,{item:!0,sm:6,xs:12},d.a.createElement(_.a,{utils:z.a},d.a.createElement(q.a,{margin:"none",id:"mui-pickers-date",label:"Start date",inputVariant:"standard",type:"text",autoOk:!0,value:n,fullWidth:!0,onChange:function(t){return e.handleDateChange(t,"start")}}))),d.a.createElement(T.a,{item:!0,sm:6,xs:12},d.a.createElement(_.a,{utils:z.a},d.a.createElement(q.a,{margin:"none",id:"mui-pickers-date",label:"End date",inputVariant:"standard",type:"text",autoOk:!0,value:l,fullWidth:!0,onChange:function(t){return e.handleDateChange(t,"end")}})))),d.a.createElement("div",{className:"py-2"}),d.a.createElement(A.TextValidator,{className:"mb-6 w-full",label:"Location",onChange:this.handleChange,type:"text",name:"location",value:r,validators:["required"],errorMessages:["this field is required"]}),d.a.createElement(A.TextValidator,{className:"mb-9 w-full",label:"Note",onChange:this.handleChange,type:"text",name:"note",value:i,rowsMax:2,multiline:!0,validators:["required"],errorMessages:["this field is required"]}),d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement(u.a,{variant:"contained",color:"primary",type:"submit"},"Save"),d.a.createElement(u.a,{onClick:this.handleDeleteEvent},d.a.createElement(w.a,{className:"mr-2 align-middle"},"delete"),"Delete")))))}}]),t}(s.Component),F=a(1834),I=a.n(F),P=Object(m.c)(I.a),B=v()(m.a),H=Object.keys(m.b).map((function(e){return m.b[e]})),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={events:[],shouldShowEventDialog:!1,newEvent:null},a.updateCalendar=function(){D.a.get("/api/calendar/events/all").then((function(e){return e.data})).then((function(e){a.setState({events:e})}))},a.handleDialogClose=function(){a.setState({shouldShowEventDialog:!1}),a.updateCalendar()},a.handleEventMove=function(e){a.handleEventResize(e)},a.handleEventResize=function(e){j(e).then((function(){a.updateCalendar()}))},a.openNewEventDialog=function(e){var t=e.action,l=Object(n.a)(e,["action"]);"doubleClick"===t&&a.setState({newEvent:l,shouldShowEventDialog:!0})},a.openExistingEventDialog=function(e){a.setState({newEvent:e,shouldShowEventDialog:!0})},a.headerComponentRef=d.a.createRef(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateCalendar()}},{key:"render",value:function(){var e=this,t=this.state,a=t.events,n=t.newEvent,l=t.shouldShowEventDialog;return d.a.createElement("div",{className:"m-sm-30"},d.a.createElement("div",{className:"mb-sm-30"},d.a.createElement(N.a,{routeSegments:[{name:"Calendar"}]})),d.a.createElement(u.a,{className:"mb-4",variant:"contained",color:"secondary",onClick:function(){return e.openNewEventDialog({action:"doubleClick",start:new Date,end:new Date})}},"Add Event"),d.a.createElement("div",{className:"h-full-screen flex-column"},d.a.createElement("div",{ref:this.headerComponentRef}),d.a.createElement(B,{selectable:!0,localizer:P,events:a,onEventDrop:this.handleEventMove,resizable:!0,onEventResize:this.handleEventResize,defaultView:m.b.MONTH,defaultDate:new Date,startAccessor:"start",endAccessor:"end",views:H,step:60,showMultiDayTimes:!0,components:{toolbar:function(t){return e.headerComponentRef.current?x.createPortal(d.a.createElement(y,t),e.headerComponentRef.current):d.a.createElement("div",null,"Header component not found")}},onSelectEvent:function(t){e.openExistingEventDialog(t)},onSelectSlot:function(t){return e.openNewEventDialog(t)}})),l&&d.a.createElement(W,{handleClose:this.handleDialogClose,open:l,event:n}))}}]),t}(s.Component);t.default=J}}]);