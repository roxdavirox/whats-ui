(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[56],{1358:function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"d",(function(){return i})),t.d(a,"b",(function(){return s})),t.d(a,"a",(function(){return c})),t.d(a,"e",(function(){return m}));var l=t(20),n=t.n(l),r=function(){return n.a.get("/api/invoices/all")},i=function(e){return n.a.get("/api/invoices",{data:e})},s=function(e){return n.a.post("/api/invoices/delete",e)},c=function(e){return n.a.post("/api/invoices/add",e)},m=function(e){return n.a.post("/api/invoices/update",e)}},2023:function(e,a,t){"use strict";t.r(a);var l=t(31),n=t(30),r=t(46),i=t(47),s=t(48),c=t(1),m=t.n(c),o=t(1194),u=t(8),d=t(1134),p=t(1200),E=t(1197),h=t(1263),v=t(1279),b=t(1280),f=t(1281),g=t(1291),N=t(1282),y=t(59),x=t(1358),C=t(1937),I=t(65),w=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(s)))).state={},t.subTotalCost=0,t}return Object(s.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(x.d)(this.props.match.params.id).then((function(a){e.setState(Object(u.a)({},a.data))}))}},{key:"render",value:function(){var e=this;this.subTotalCost=0;var a=this.state,t=a.orderNo,l=a.buyer,n=a.seller,r=a.item,i=void 0===r?[]:r,s=a.status,c=a.vat,u=a.date;return m.a.createElement("div",{className:"invoice-viewer py-4"},m.a.createElement("div",{className:"viewer_actions px-4 mb-5 flex items-center justify-between"},m.a.createElement(y.a,{to:"/invoice/list"},m.a.createElement(d.a,null,m.a.createElement(p.a,null,"arrow_back"))),m.a.createElement("div",null,m.a.createElement(E.a,{className:"mr-4 py-2",variant:"contained",color:"primary",onClick:function(){return e.props.toggleInvoiceEditor()}},"Edit Invoice"),m.a.createElement(E.a,{onClick:function(){return window.print()},className:"py-2",variant:"contained",color:"secondary"},"Print Invoice"))),m.a.createElement("div",{id:"print-area"},m.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},m.a.createElement("div",null,m.a.createElement("h5",{className:"mb-2"},"Order Info"),m.a.createElement("p",{className:"mb-4"},"Order Number"),m.a.createElement("p",{className:"mb-0"},"# ",t)),m.a.createElement("div",{className:"text-right"},m.a.createElement("h5",{className:"font-normal mb-4 capitalize"},m.a.createElement("strong",null,"Order status:")," ",s),m.a.createElement("h5",{className:"font-normal capitalize"},m.a.createElement("strong",null,"Order date: ")," ",m.a.createElement("span",null,u?Object(C.a)(new Date(u).getTime(),"MMMM dd, yyyy"):"")))),m.a.createElement(h.a,null),m.a.createElement("div",{className:"viewer__billing-info px-4 py-5 flex justify-between"},m.a.createElement("div",null,m.a.createElement("h5",{className:"mb-2"},"Bill From"),m.a.createElement("p",{className:"mb-4"},n?n.name:null),m.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},n?n.address:null)),m.a.createElement("div",{className:"text-right w-full"},m.a.createElement("h5",{className:"mb-2"},"Bill To"),m.a.createElement("p",{className:"mb-4"},l?l.name:null),m.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},l?l.address:null)),m.a.createElement("div",null)),m.a.createElement(o.a,{className:"mb-4",elevation:0},m.a.createElement(v.a,null,m.a.createElement(b.a,null,m.a.createElement(f.a,null,m.a.createElement(g.a,{className:"pl-sm-24"},"#"),m.a.createElement(g.a,{className:"px-0"},"Item Name"),m.a.createElement(g.a,{className:"px-0"},"Unit Price"),m.a.createElement(g.a,{className:"px-0"},"Unit"),m.a.createElement(g.a,{className:"px-0"},"Cost"))),m.a.createElement(N.a,null,i.map((function(a,t){return e.subTotalCost+=a.unit*a.price,m.a.createElement(f.a,{key:t},m.a.createElement(g.a,{className:"pl-sm-24 capitalize",align:"left"},t+1),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},a.name),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},a.price),m.a.createElement(g.a,{className:"pl-0 capitalize"},a.unit),m.a.createElement(g.a,{className:"pl-0"},a.unit*a.price))}))))),m.a.createElement("div",{className:"px-4 flex justify-end"},m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"pr-12"},m.a.createElement("p",{className:"mb-4"},"Sub Total:"),m.a.createElement("p",{className:"mb-4"},"Vat(%):"),m.a.createElement("strong",null,m.a.createElement("p",null,"Grand Total:"))),m.a.createElement("div",null,m.a.createElement("p",{className:"mb-4"},this.subTotalCost),m.a.createElement("p",{className:"mb-4"},c),m.a.createElement("p",null,m.a.createElement("strong",null,"$",this.subTotalCost+=this.subTotalCost*c/100)))))))}}]),a}(c.Component),O=Object(I.g)(w),j=t(12),T=t(21),S=t(1129),M=t(1317),q=t(1196),k=t(1335),V=t(1195),z=t(66),B=t(1262),D=t(1377),P=t(1334),W=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(s)))).subTotalCost=0,t.state={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1},t.generateRandomId=function(){var e=Math.random().toString(),a=e.substr(2,e.length-1);t.setState({id:a})},t.handleChange=function(e){e.persist(),t.setState(Object(T.a)({},e.target.name,e.target.value))},t.handleSellerBuyerChange=function(e,a){e.persist(),t.setState(Object(T.a)({},a,Object(u.a)({},t.state[a],Object(T.a)({},e.target.name,e.target.value))))},t.handleIvoiceListChange=function(e,a){var l=Object(j.a)(t.state.item);l.map((function(t,l){return a===l&&(t[e.target.name]=e.target.value),t})),t.setState({item:l})},t.addItemToInvoiceList=function(){var e=Object(j.a)(t.state.item);e.push({name:"",unit:"",price:""}),t.setState({item:e})},t.deleteItemFromInvoiceList=function(e){var a=Object(j.a)(t.state.item);a.splice(e,1),t.setState({item:a})},t.handleDateChange=function(e){t.setState({date:e})},t.handleSubmit=function(){t.setState({loading:!0});var e=t.state;delete e.loading,t.props.isNewInvoice?Object(x.a)(e).then((function(){t.setState({loading:!1}),t.props.history.push("/invoice/".concat(t.state.id)),t.props.toggleInvoiceEditor()})):Object(x.e)(e).then((function(){t.setState({loading:!1}),t.props.toggleInvoiceEditor()}))},t}return Object(s.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.isNewInvoice?this.generateRandomId():Object(x.d)(this.props.match.params.id).then((function(a){e.setState(Object(u.a)({},a.data))}))}},{key:"render",value:function(){var e=this;this.subTotalCost=0;var a=this.state,t=a.orderNo,l=a.buyer,n=a.seller,r=a.item,i=void 0===r?[]:r,s=a.status,c=a.vat,o=a.date,u=a.currency,d=a.loading;return m.a.createElement("div",{className:"invoice-viewer py-4"},m.a.createElement(z.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onError:function(a){return e.handleSubmit}},m.a.createElement("div",{className:"viewer_actions px-4 flex justify-end"},m.a.createElement("div",{className:"mb-6"},m.a.createElement(E.a,{type:"button",className:"mr-4 py-2",variant:"text",onClick:function(){return e.props.toggleInvoiceEditor()}},"Cancel"),m.a.createElement(E.a,{type:"submit",className:"py-2",variant:"contained",color:"primary",disabled:d},"Save"))),m.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},m.a.createElement("div",null,m.a.createElement("h5",{className:"mb-2"},"Order Info"),m.a.createElement("p",{className:"mb-4"},"Order Number"),m.a.createElement(z.TextValidator,{label:"Order No.",onChange:this.handleChange,type:"text",fullWidth:!0,name:"orderNo",value:t,validators:["required"],errorMessages:["this field is required"]})),m.a.createElement("div",null,m.a.createElement(S.a,{component:"fieldset",className:"w-full mb-4"},m.a.createElement(M.a,{"aria-label":"status",name:"status",value:s,onChange:this.handleChange},m.a.createElement(q.a,{className:"h-32",value:"pending",control:m.a.createElement(k.a,{color:"secondary"}),label:"Pending",labelPlacement:"start"}),m.a.createElement(q.a,{className:"h-32",value:"processing",control:m.a.createElement(k.a,{color:"secondary"}),label:"Processing",labelPlacement:"start"}),m.a.createElement(q.a,{className:"h-32",value:"delivered",control:m.a.createElement(k.a,{color:"secondary"}),label:"Delivered",labelPlacement:"start"}))),m.a.createElement("div",{className:"text-right"},m.a.createElement("h5",{className:"font-normal"},m.a.createElement("strong",null,"Order date: "))),m.a.createElement(B.a,{utils:P.a},m.a.createElement(D.a,{margin:"none",id:"mui-pickers-date",label:"Order Date",inputVariant:"standard",type:"text",autoOk:!0,value:o,fullWidth:!0,format:"MMMM dd, yyyy",onChange:this.handleDateChange,KeyboardButtonProps:{"aria-label":"change date"}})))),m.a.createElement(h.a,null),m.a.createElement(V.a,{className:"px-4 py-5",container:!0,justify:"space-between",spacing:4},m.a.createElement(V.a,{item:!0},m.a.createElement("div",null,m.a.createElement("h5",{className:"mb-5"},"Bill From"),m.a.createElement(z.TextValidator,{className:"mb-5",label:"Seller Name",onChange:function(a){return e.handleSellerBuyerChange(a,"seller")},type:"text",name:"name",fullWidth:!0,value:n?n.name:null,validators:["required"],errorMessages:["this field is required"]}),m.a.createElement(z.TextValidator,{label:"Seller Name",type:"text",onChange:function(a){return e.handleSellerBuyerChange(a,"seller")},name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:n?n.address:null,validators:["required"],errorMessages:["this field is required"]}))),m.a.createElement(V.a,{item:!0},m.a.createElement("div",{className:"text-right"},m.a.createElement("h5",{className:"mb-5"},"Bill To"),m.a.createElement(z.TextValidator,{className:"mb-5",label:"Buyer Name",onChange:function(a){return e.handleSellerBuyerChange(a,"buyer")},type:"text",name:"name",fullWidth:!0,value:l?l.name:null,validators:["required"],errorMessages:["this field is required"]}),m.a.createElement(z.TextValidator,{label:"Buyer Address",onChange:function(a){return e.handleSellerBuyerChange(a,"buyer")},type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:l?l.address:null,validators:["required"],errorMessages:["this field is required"]})))),m.a.createElement(v.a,{className:"mb-4"},m.a.createElement(b.a,null,m.a.createElement(f.a,{className:"bg-default"},m.a.createElement(g.a,{className:"pl-sm-24"},"#"),m.a.createElement(g.a,{className:"px-0"},"Item Name"),m.a.createElement(g.a,{className:"px-0"},"Unit Price"),m.a.createElement(g.a,{className:"px-0"},"Unit"),m.a.createElement(g.a,{className:"px-0"},"Cost"),m.a.createElement(g.a,{className:"px-0"},"Action"))),m.a.createElement(N.a,null,i.map((function(a,t){return e.subTotalCost+=a.price*a.unit,m.a.createElement(f.a,{key:t},m.a.createElement(g.a,{className:"pl-sm-24 capitalize",align:"left"},t+1),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},m.a.createElement(z.TextValidator,{label:"Item Name",onChange:function(a){return e.handleIvoiceListChange(a,t)},type:"text",name:"name",fullWidth:!0,value:a?a.name:null,validators:["required"],errorMessages:["this field is required"]})),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},m.a.createElement(z.TextValidator,{label:"Item Price",onChange:function(a){return e.handleIvoiceListChange(a,t)},type:"number",name:"price",fullWidth:!0,value:a?a.price:null,validators:["required"],errorMessages:["this field is required"]})),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},m.a.createElement(z.TextValidator,{label:"Item Unit",onChange:function(a){return e.handleIvoiceListChange(a,t)},type:"number",name:"unit",fullWidth:!0,value:a?a.unit:null,validators:["required"],errorMessages:["this field is required"]})),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},a.unit*a.price),m.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},m.a.createElement(E.a,{onClick:function(){return e.deleteItemFromInvoiceList(t)}},"Delete")))})))),m.a.createElement("div",{className:"flex justify-end px-4 mb-4"},m.a.createElement(E.a,{onClick:this.addItemToInvoiceList},"Add Item")),m.a.createElement("div",{className:"px-4 flex justify-end"},m.a.createElement("div",{className:"flex"},m.a.createElement("div",{className:"pr-12"},m.a.createElement("p",{className:"mb-8"},"Sub Total:"),m.a.createElement("p",{className:"mb-12"},"Vat(%):"),m.a.createElement("p",{className:"mb-5"},"currency:"),m.a.createElement("strong",null,m.a.createElement("p",null,"Grand Total:"))),m.a.createElement("div",null,m.a.createElement("p",{className:"mb-4"},this.subTotalCost),m.a.createElement(z.TextValidator,{className:"mb-4",label:"Vat",onChange:this.handleChange,type:"number",name:"vat",value:c,validators:["required"],errorMessages:["this field is required"]}),m.a.createElement("br",null),m.a.createElement(z.TextValidator,{label:"Currency",onChange:this.handleChange,type:"text",name:"currency",value:u,validators:["required"],errorMessages:["this field is required"]}),m.a.createElement("p",{className:"mt-4"},m.a.createElement("strong",null,u,this.subTotalCost*c)))))))}}]),a}(c.Component),_=Object(I.g)(W),L=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(s)))).state={showInvoiceEditor:!1,isNewInvoice:!1},t.toggleInvoiceEditor=function(){t.setState({showInvoiceEditor:!t.state.showInvoiceEditor,isNewInvoice:!1})},t}return Object(s.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){"add"===this.props.match.params.id&&this.setState({showInvoiceEditor:!0,isNewInvoice:!0})}},{key:"render",value:function(){return m.a.createElement(o.a,{elevation:6,className:"invoice-details m-sm-30"},this.state.showInvoiceEditor?m.a.createElement(_,{toggleInvoiceEditor:this.toggleInvoiceEditor,isNewInvoice:this.state.isNewInvoice}):m.a.createElement(O,{toggleInvoiceEditor:this.toggleInvoiceEditor}))}}]),a}(c.Component);a.default=L}}]);